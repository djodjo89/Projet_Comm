{"version":3,"sources":["features/player/boy3.png","features/player/reducer.js","features/map/reducer.js","config/store.js","config/constants.js","features/player/index.js","features/player/movement.js","features/map/index.js","data/maps/1/index.js","features/world/index.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","initialState","position","spriteLocation","direction","walkIndex","playerReducer","state","arguments","length","undefined","action","type","Object","objectSpread","payload","tiles","mapReducer","rootReducer","combineReducers","player","map","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","SPRITE_SIZE","MAP_HEIGHT","MAP_WIDTH","connect","getSpriteLocation","concat","dispatchMove","newPos","getState","getWalkIndex","dispatch","attemptMove","oldPos","getNewPosition","observeBoundaries","y","x","observeObstacle","observeActualTile","addEventListener","e","preventDefault","keyCode","console","log","handleKeyDown","handleMovement","props","react_default","a","createElement","style","top","left","backgroundImage","walkSprite","backgroundPosition","width","height","getTileSprite","MapTile","className","tile","marginBottom","MapRow","border","margin","row","World","features_player","App","world","ReactDOM","render","es","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.02ce3cbf.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/boy3.ed9427f4.png\";","\r\nconst initialState = {\r\n    position: [0, 0],\r\n    spriteLocation: '0px 0px',\r\n    direction: 'EAST',\r\n    walkIndex: 0,\r\n}\r\n\r\nconst playerReducer = (state=initialState, action) => {\r\n    switch(action.type) {\r\n        case 'MOVE_PLAYER':\r\n            return {\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default playerReducer\r\n","\r\nconst initialState = {\r\n    tiles: [],\r\n}\r\n\r\nconst mapReducer = (state=initialState, action) => {\r\n    switch(action.type) {\r\n        case 'ADD_TILES':\r\n            return {\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n export default mapReducer\r\n","import { createStore, combineReducers } from 'redux'\r\nimport playerReducer from '../features/player/reducer'\r\nimport mapReducer from '../features/map/reducer'\r\n\r\nconst rootReducer = combineReducers({\r\n    player: playerReducer,\r\n    map: mapReducer,\r\n})\r\n\r\nconst store = createStore(\r\n    rootReducer,\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n)\r\n\r\nexport default store","export const SPRITE_SIZE = 62\r\nexport const MAP_HEIGHT = SPRITE_SIZE * 10\r\nexport const MAP_WIDTH = SPRITE_SIZE * 20","import React from 'react'\nimport { connect } from 'react-redux'\nimport walkSprite from './boy3.png'\nimport handleMovement from './movement'\n\nfunction Player(props){\n    return (\n        <div\n            style={{\n                position: 'absolute',\n                top: props.position[1]+3,\n                left: props.position[0],\n                backgroundImage: `url('${walkSprite}')`,\n                backgroundPosition: props.spriteLocation,\n                width: '64px',\n                height: '64px',\n            }}\n        />\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        ...state.player,\n    }\n}\n\nexport default connect(mapStateToProps)(handleMovement(Player))\n","import store from '../../config/store'\r\nimport { SPRITE_SIZE, MAP_HEIGHT, MAP_WIDTH } from '../../config/constants'\r\n\r\nexport default function handleMovement(player) {\r\n\r\n    function getNewPosition(oldPos, direction) {\r\n        switch(direction) {\r\n            case 'WEST':\r\n                return [ oldPos[0] - SPRITE_SIZE, oldPos[1] ]\r\n            case 'EAST':\r\n                return [ oldPos[0] + SPRITE_SIZE, oldPos[1] ]\r\n            case 'NORTH':\r\n                return [ oldPos[0], oldPos[1] - SPRITE_SIZE ]\r\n            case 'SOUTH':\r\n                return [ oldPos[0], oldPos[1] + SPRITE_SIZE ]\r\n            default :\r\n        }\r\n    }\r\n\r\n    function getSpriteLocation (direction, walkIndex) {\r\n        switch(direction) {\r\n            case 'WEST' :\r\n                return `${SPRITE_SIZE * walkIndex}px -${SPRITE_SIZE * 1}px`\r\n            case 'EAST' :\r\n                return `${SPRITE_SIZE * walkIndex}px ${SPRITE_SIZE * 2}px`\r\n            case 'NORTH' :\r\n                return `${SPRITE_SIZE * walkIndex}px ${SPRITE_SIZE * 1}px`\r\n            case 'SOUTH' :\r\n                return `${SPRITE_SIZE * walkIndex}px ${SPRITE_SIZE * 0}px`\r\n            default:\r\n        }\r\n    }\r\n\r\n    function getWalkIndex () {\r\n        const walkIndex = store.getState().player.walkIndex\r\n        return walkIndex > 2 ? 0 : walkIndex + 1\r\n    }\r\n\r\n    function observeBoundaries(oldPos, newPos) {\r\n        return (newPos[0] >= 0 && newPos[0] < MAP_WIDTH) &&\r\n               (newPos[1] >= 0 && newPos[1] < MAP_HEIGHT)\r\n    }\r\n\r\n    function dispatchMove(direction, newPos) {\r\n        const walkIndex = getWalkIndex()\r\n        store.dispatch({\r\n            type: 'MOVE_PLAYER',\r\n            payload: {\r\n                position: newPos,\r\n                direction,\r\n                walkIndex,\r\n                spriteLocation: getSpriteLocation(direction, walkIndex)\r\n            }\r\n        })\r\n    }\r\n\r\n    function observeObstacle(newPos) {\r\n        const tiles = store.getState().map.tiles\r\n        const y = newPos[1] / SPRITE_SIZE\r\n        const x = newPos[0] / SPRITE_SIZE\r\n        const nextTile = tiles[y][x]\r\n        return nextTile < 5\r\n    }\r\n\r\n    function observeActualTile(oldPos) {\r\n        const tiles = store.getState().map.tiles\r\n        const y = oldPos[1] / SPRITE_SIZE\r\n        const x = oldPos[0] / SPRITE_SIZE\r\n        const oldTile = tiles[y][x]\r\n        return oldTile !== 1\r\n    }\r\n\r\n    function attemptMove (direction) {\r\n        const oldPos = store.getState().player.position\r\n        const newPos =  getNewPosition(oldPos, direction)\r\n\r\n        if (observeBoundaries(oldPos, newPos) && observeObstacle(newPos) && observeActualTile(oldPos)) \r\n            dispatchMove(direction, newPos)\r\n    }\r\n\r\n    function handleKeyDown(e) {\r\n        e.preventDefault()\r\n        switch(e.keyCode) {\r\n            case 37:\r\n                return attemptMove('WEST')\r\n            case 38:\r\n                return attemptMove('NORTH')\r\n            case 39:\r\n                return attemptMove('EAST')\r\n            case 40:\r\n                return attemptMove('SOUTH')\r\n            default:\r\n                console.log(e.keyCode)\r\n        }\r\n    }\r\n\r\n    window.addEventListener('keydown', (e) => {\r\n        handleKeyDown(e)\r\n    })\r\n\r\n    return player\r\n}","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { SPRITE_SIZE } from '../../config/constants'\r\n\r\nimport './styles.css'\r\n\r\nfunction getTileSprite (type) {\r\n    switch(type) {\r\n        case 0:\r\n            return 'grass'\r\n        case 5:\r\n            return 'rock'\r\n        case 6:\r\n            return 'tree'\r\n        case 1:\r\n            return 'door'\r\n        default:\r\n            return 'grass'\r\n    }\r\n}\r\n\r\nfunction MapTile(props) {\r\n    return <div \r\n        className={`tile ${getTileSprite(props.tile)}`}\r\n        style={{\r\n            height:SPRITE_SIZE,\r\n            width: SPRITE_SIZE,\r\n            marginBottom: -4,\r\n        }}\r\n        />\r\n}\r\n\r\nfunction MapRow(props) {\r\n        return <div className=\"row\">\r\n            {\r\n                props.tiles.map( tile => <MapTile tile={tile} />)\r\n            }\r\n        </div>\r\n}\r\n\r\nfunction Map(props) {\r\n    return (\r\n        <div\r\n            style={{\r\n                position: 'relative',\r\n                top: '0px',\r\n                left: '0px',\r\n                width: '1240px',\r\n                height: '620px',\r\n                border: '4px solid white',\r\n                margin: '10px auto',\r\n            }}\r\n        >\r\n            {\r\n                props.tiles.map( row => <MapRow tiles={row} />)\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        tiles: state.map.tiles,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Map)","export const tiles = [\r\n    [0, 0, 0, 0, 6, 0, 0, 0, 5, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, ],\r\n    [0, 5, 0, 0, 6, 0, 0, 0, 5, 0, 6, 0, 0, 0, 6, 6, 0, 6, 6, 0, ],\r\n    [5, 5, 5, 0, 6, 6, 6, 0, 5, 0, 6, 6, 6, 6, 6, 0, 0, 6, 0, 0, ],\r\n    [0, 0, 0, 0, 0, 0, 6, 0, 0, 0, 6, 0, 0, 0, 0, 0, 6, 6, 0, 5, ],\r\n    [0, 0, 6, 6, 6, 6, 6, 6, 6, 6, 6, 0, 6, 0, 5, 5, 0, 0, 0, 5, ],\r\n    [5, 0, 6, 0, 6, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, 5, 0, 5, 5, 5, ],\r\n    [0, 0, 0, 0, 6, 6, 0, 6, 0, 6, 6, 6, 6, 6, 0, 5, 0, 0, 0, 0, ],\r\n    [5, 5, 5, 0, 0, 0, 0, 6, 6, 6, 0, 0, 0, 0, 0, 0, 0, 6, 0, 0, ],\r\n    [0, 0, 5, 5, 0, 5, 0, 6, 0, 0, 0, 5, 5, 5, 5, 5, 0, 6, 6, 6, ],\r\n    [0, 0, 0, 0, 0, 5, 0, 6, 0, 5, 5, 5, 0, 0, 0, 0, 0, 0, 0, 1, ],\r\n]","import React from 'react'\r\nimport Player from '../player'\r\nimport Map from '../map'\r\n\r\nimport { tiles } from '../../data/maps/1'\r\nimport store from '../../config/store'\r\n\r\nfunction World(props) {\r\n    store.dispatch({ type: 'ADD_TILES', payload: {\r\n        tiles,\r\n    }})\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                position: 'relative',\r\n                width: '640px',\r\n                height: '320px',\r\n                margin: '20px auto',\r\n            }}\r\n        >\r\n            <Map/>\r\n            <Player/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default World","import React from 'react'\nimport World from './features/world'\n\nfunction App() {\n  return (\n      <div>\n          <World/>\n      </div>\n  );\n}\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport { Provider } from 'react-redux'\n\nimport store from './config/store'\n\nReactDOM.render(<Provider store={store}>\n    <App />\n</Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PW\n"],"sourceRoot":""}